# Chapter 8: Unsupervised Entity Alignment

> *Entity Alignment: Concepts, Recent Advances and Novel Approaches*
> - https://link.springer.com/chapter/10.1007/978-981-99-4250-3_1 (page 213)

## Unsupervised Entity Alignment

### Abstract
1. **研究背景**：最新的实体对齐（Entity Alignment, EA）解决方案往往依赖于有标签的数据进行模型训练。此外，它们通常在封闭域（closed-domain）下工作，无法处理不可对齐的实体。
2. **研究动机**：为了解决这些不足，我们提出了一个在开放世界中执行实体对齐的无监督框架。
3. **方法概述**：
   - 首先，我们从知识图谱（Knowledge Graph, KG）的辅助信息中挖掘有用特征。
   - 接着，设计一个不可对齐实体预测模块，以筛除不可对齐的实体并产生初步对齐结果。
   - 这些初步结果被视为伪标签数据，并被输入到渐进学习框架中，以生成结构化表示，并与辅助信息相结合，提供更全面的对齐视角。
   - 最终，渐进学习框架通过逐渐提高结构化嵌入的质量，并通过上一轮的对齐结果丰富伪标签数据，从而提高对齐性能。
4. **研究贡献**：我们的解决方案不需要有标签数据，且能够有效过滤掉不可对齐的实体。综合实验评估验证了其优越性。

### 8.1 Introduction

1. **现有方法的局限性**：
   - 现有最先进的EA解决方案 [2–5] 假设等价实体通常具有相似的邻域信息。
   - 因此，它们利用KG嵌入模型（如TransE [6]）或图神经网络（GNN）模型（如GCN [7]）来生成单个KG中实体的结构嵌入。
   - 然后，通过使用种子实体对作为连接，将这些独立的嵌入投影到统一的嵌入空间中，使得来自不同KG的实体可以直接比较。
   - 最终，为了确定对齐结果，大多数当前工作 [1, 8–10] 将对齐过程形式化为排序问题，即对源KG中的每个实体，根据某种距离度量对目标KG中的所有实体进行排序，距离最小的实体被视为等价的目标实体。

2. **示例**：
   - 图8.1是关于导演是是枝裕和的部分英文KG和部分西班牙KG，其中虚线表示已知的对齐关系（即种子）。
   - EA任务旨在识别两个KG之间的等价实体对，例如（Shoplifters, Manbiki Kazoku）。

<figure style="display: block; text-align: center;">   <img src="FL/2024_11_12/images/2024-11-27-19-23-19.png" at="name" style="display: block; margin: auto; width: 50%; height: auto;"> </figure>

1. **现有方法的几个问题**：
   - **对有标签数据的依赖**：大多数方法依赖于预对齐的种子实体对来连接两个KG，并使用统一的KG结构嵌入来对齐实体。然而，这些有标签数据在现实环境中可能并不存在。例如，在示例中，KGEN中的是枝裕和与KGES中的是枝裕和之间的等价关系可能事先未知。在这种情况下，仅依赖结构信息的最新方法将无法胜任，因为没有种子来连接这些独立的KG。
   - **封闭域设置**：所有现有EA解决方案都在封闭域设置下工作 [11]，即假设源KG中的每个实体在目标KG中都有一个等价实体。然而，在实际环境中，总是存在不可对齐的实体。例如，在示例中，对于源实体Ryo Kase，目标KG中没有等价实体。因此，理想的EA系统应该能够预测不可对齐的实体。

2. **我们的无监督EA解决方案：UEA**：
   - 为了应对这些问题，我们提出了一个能够解决不可对齐问题的无监督EA解决方案UEA。
   - 具体而言，为了减少对有标签数据的依赖，我们从KG的辅助信息中挖掘有用特征，并用它们生成初步的伪标签数据。
   - 这些初步的种子被输入到我们设计的渐进学习框架中，以生成统一的KG结构表示，并与辅助信息结合，提供更全面的对齐视角。
   - 该框架还通过自训练方式逐步增强训练数据并提高对齐结果。此外，为了处理不可对齐问题，我们设计了一个不可对齐实体预测模块，该模块利用阈值化双向最近邻搜索（TBNNS）筛除不可对齐的实体，并将其排除在对齐结果之外。
   - 我们将不可对齐实体预测模块嵌入到渐进学习框架中，通过动态调整TBNNS中的阈值来控制渐进学习的进度。

3. **伪标签数据的信度（Confidence）**：
   - 此外，考虑到渐进学习过程中生成的伪标签数据质量可能存在差异，我们引入了信度的概念来衡量实体对是否正确的概率。
   - 我们进一步将这些信度分数融入到KG表示学习中，以产生更准确的结构嵌入。
   - 通过实证研究，我们证明了基于信度的框架CUEA比UEA在输入辅助信息质量不同的情况下具有更稳定的性能。

### Contribution
本章的主要贡献可以总结如下：

- **识别现有EA方法的不足**：我们识别了现有EA方法的不足，即需要有标签数据并在封闭域环境下工作，并提出了一个无监督EA框架UEA，以及一个基于信度的扩展模型CUEA，能够处理不可对齐的实体。具体来说：
  1. 利用KG的辅助信息生成初步伪标签数据；
  2. 设计了一个不可对齐实体预测模块，利用基于信度的阈值双向最近邻搜索（TBNNS）策略生成对齐结果，有效排除不可对齐的实体；
  3. 提供了一种渐进学习算法，以提高KG嵌入的质量并增强对齐性能。
- **实验验证**：我们通过实证评估将我们的提案与最先进的方法进行了比较，结果证明了它们的优越性。

### Organization
- **Section 8.2**：正式定义EA任务并介绍相关工作。
- **Section 8.3**：详细阐述框架。
- **Section 8.4**：介绍实验结果并进行详细分析。
- **Section 8.5**：总结本章内容。

### 8.2 Task Definition and Related Work

1. **Task Definition（任务定义）**
   - EA任务的输入是源KG \(G_1\) 和目标KG \(G_2\)。
   - EA的任务被定义为在KG之间找到等价实体，即 \(A = \{(u, v) | u \in E_1, v \in E_2, u \leftrightarrow v\}\)，其中 \(E_1\) 和 \(E_2\) 分别表示 \(G_1\) 和 \(G_2\) 的实体集，\(u \leftrightarrow v\) 表示源实体 \(u\) 和目标实体 \(v\) 等价，即 \(u\) 和 \(v\) 代表相同的现实世界对象。
   - 大多数现有的EA解决方案假设存在一组种子实体对 \(s = \{(u_s, v_s) | u_s \in E_1, v_s \in E_2, u_s \leftrightarrow v_s\}\)。然而，在本章中，我们关注无监督EA，不假设这些有标签数据的可用性。

2. **Unsupervised Entity Alignment（无监督实体对齐）**
   - 一些方法已经研究了无标签数据情况下的对齐问题。Qu等人 [20] 提出了一种基于对抗训练框架(Adversarial Training Framework)的无监督知识图谱对齐方法。然而，其实验结果非常差强人意。
   - He等人 [21] 利用异构KG之间的共享属性来生成对齐的实体对，用于检测更多等价的属性。他们交替执行实体对齐和属性对齐，生成更多高质量的对齐实体对，这些对齐实体对被用于训练关系嵌入模型。最后，他们通过二元回归模型将由属性和关系三元组生成的对齐结果结合在一起。
     - 这项工作的整体流程可能看起来与我们提出的模型相似。然而，存在许多显著的不同，例如，我们的工作中的KG嵌入是逐步更新的，这可以得到更准确的对齐结果，且我们的模型可以处理不可对齐的实体。在第8.4节中，我们通过实验证明了我们模型的优越性。
   - 我们注意到，一些实体解析（Entity Resolution, ER）方法也建立在类似于EA的环境中，以PARIS [22] 为代表。它们采用集体对齐算法，例如相似性传播（similarity propagation），以对实体之间的关系进行建模。我们在实验研究中也包括了它们，以确保本章的全面性。
     > - 集体对齐算法（Collective Alignment Algorithm）：集体对齐算法是一种用于实体解析的方法，它通过集体对齐（Collective Alignment）来识别和连接具有相同含义的实体。集体对齐算法通常包括以下几个步骤：
       > 1. 初始化：为每个实体分配一个初始标签或表示。
       > 2. 相似性传播：通过迭代过程，实体根据它们之间的相似性传播标签或表示。
       > 3. 聚类：根据传播的标签或表示，将实体分组为等价的实体对。
       > 4. 验证：对聚类结果进行验证和调整，以确保结果的准确性和可靠性。

## 8.3 Methodology

在本节中，我们首先介绍我们提出的方法的概要。然后，详细说明如何处理辅助信息以生成初步的对齐种子。

### 8.3.1 Model Outline（模型概要）

- 如图8.2所示，给定两个知识图谱（KGs），CUEA首先从辅助信息中挖掘有用的特征。
- 这些特征被传递到不可对齐实体预测模块，以生成具有信度得分的初始对齐结果，作为伪标签数据。
- 然后，渐进学习框架使用这些伪种子及其概率得分来连接两个KG，并学习统一的实体结构嵌入。
- 它进一步结合来自辅助信息和结构信息的对齐信号，为对齐提供更全面的视角。
- 最终，通过迭代更新伪标签数据，渐进地提高结构嵌入的质量并丰富对齐结果，从而逐步获得更好的对齐。
- 注意，通过将信度得分设为1，CUEA可以变为UEA模型。

<figure style="display: block; text-align: center;">   <img src="FL/2024_11_12/images/2024-11-27-19-44-16.png" at="name" style="display: block; margin: auto; width: 50%; height: auto;"> </figure>

### 8.3.2 Side Information（辅助信息）

- KG中有丰富的辅助信息，例如属性、描述和类。在本章中，我们使用属性的一种特定形式——实体名称，因为它存在于大多数KG中。
- 为了最大化利用实体名称信息，受到Zeng等人 [5] 的启发，我们从语义层面和字符串层面挖掘这些信息，并生成两个KG中实体之间的文本距离矩阵。
- 具体来说，我们使用平均词嵌入来表示实体名称的语义含义。给定源实体和目标实体的语义嵌入，通过从1减去它们的余弦相似度得分来获得语义距离得分。
- 我们将两个KG中实体之间的语义距离矩阵记为 \(M_n\)，其中行代表源实体，列代表目标实体，矩阵中的每个元素表示源实体与目标实体之间的距离得分。
- 至于字符串级特征，我们采用Levenshtein距离 [23] 来衡量两个序列之间的差异。我们将字符串距离矩阵记为 \(M_l\)。
- 为了获得对齐的更全面视角，我们将这两个距离矩阵结合起来，生成文本距离矩阵 \(M_t = \alpha M_n + (1 - \alpha) M_l\)，其中 \(\alpha\) 是权衡权重的超参数。
- 然后，我们将文本距离矩阵 \(M_t\) 传递给不可对齐实体模块，生成对齐结果，作为训练KG结构嵌入的伪标签数据。详细内容将在下一小节中介绍。

**Remark**：这一步的目的是利用可用的辅助信息生成对齐的有用特征。其他类型的辅助信息，例如属性和实体描述，也可以被利用。此外，还可以使用更先进的文本编码器，例如拼写无关词嵌入 [24] 和用于编辑距离的卷积嵌入 [25]。我们将在未来研究它们。

### 8.3.3 Unmatchable Entity Prediction（不可对齐实体预测）

- 最新的EA解决方案为每个源实体生成一个对应的目标实体，而未考虑潜在的不可对齐问题。
- 然而，正如[12]中提到的，在现实环境中，KG包含其他KG不包含的实体。例如，在对齐YAGO 4和IMDB时，YAGO 4中的实体只有1%与电影相关，而其他99%的实体在IMDB中没有匹配。这些不可对齐的实体会增加EA的难度。
- 因此，在本章中，我们设计了一个不可对齐实体预测模块，以预测不可对齐的实体并将其从对齐结果中过滤掉。

#### 8.3.3.1 Thresholded Bidirectional Nearest Neighbor Search（阈值双向最近邻搜索）

- 我们提出了一种新的策略，即阈值双向最近邻搜索（TBNNS），用于生成对齐结果，并预测未对齐的实体为不可对齐实体。
- 如算法1所示，给定源实体 \(u\) 和目标实体 \(v\)，如果 \(u\) 和 \(v\) 互为最近邻，且它们之间的距离小于给定阈值 \(\theta\)，我们认为 \((u, v)\) 是一个对齐实体对。注意，\(M(u, v)\) 表示距离矩阵 \(M\) 中第 \(u\) 行和第 \(v\) 列的元素。
- TBNNS策略对对齐施加了严格的约束，因为它要求匹配的实体双方都最优选彼此，且它们嵌入之间的距离低于一定值。因此，它可以有效预测不可对齐的实体，防止它们被对齐。
- 值得注意的是，阈值 \(\theta\) 在这个策略中起着重要作用。较大的阈值会导致更多的匹配，但也会增加包含错误匹配或不可对齐实体的风险。相反，较小的阈值只会产生少量对齐实体对，但几乎所有的对齐都是正确的。这在第8.4.4节中进一步讨论和验证。因此，我们的渐进学习框架动态调整阈值，以生成更准确的对齐结果（将在下一小节中讨论）。

<figure style="display: block; text-align: center;">   <img src="FL/2024_11_12/images/2024-11-27-19-43-45.png" at="name" style="display: block; margin: auto; width:100%; height: auto;"></figure>